# ComSim-Dashboard

This is a repository for the initial version of a grassroots simulation dashboard, called "ComSim" (Community Simulation) as part of my PhD research.
Thi dashboard aims to provide a tailored planning support tool for decision-makers to help detect suitable locations for a longer-lived grassroots initiatives implementation on an urban neighbourhood scale. Grassroots actors can use it to self-evaluate their existing grassroots initiatives and improve practices that are underperformed.

Please note that this is an experiment version that has not been tested in an actual case. The current code results from several trials and errors, acting as a minimum specification to run the simulation. The current accuracy rate of the simulation is around 69.5% tested using the actual data (waste banks initiatives), given some assumptions created for some variables in the data. It can be further improved by calibrating the codes and model and adding some features, such as a parameter threshold and score input bar, where users can set the parameter scoring by themselves. There will be improvements on the simulation flow, which include the time variable, dynamic change of the parameter and scoring rules, and improved user interface. This repository aims to showcase the code base of the dashboard so that other scholars can learn, replicate, reproduce, and improve it.

The provided code can be run in R directly and deployed through shinyapps.io using your own account.

# Context
This dashbaord is developed based on my PhD research on the formulation of location suitability assessment for grassroots initaitives development based on the survivability factors and location characteristics of grassroots initiatives. I used data on waste banks initiatives in Yogyakarta City, Indonesia, to reveal the factors. The core problems of this study is that cities are becoming more complex because of population growth and urbanisation aggravated by climate change and public health issues. Apart from the top-down policy implementation, grassroots actors take part in addressing those issues because of the lack of government interventions. However, because of their small scale, organicity, and non-government nature, not all of them can consistently survive and continue to contribute to cities. Replications of the initiatives to other areas of the city often failed to make the initiatives last long because the lack of identification on the survivability factors and location characteristics. The key assumption of this study is that the longer the initiative survive, the more they can contribute to address urban issues. There is a lack of a tool to assess the location’s suitability for implementing the initiatives, considering their survivability and locational characteristics. A mixed-method approach was utilised, combining survival analysis and SatScan statistics with thematic analysis to reveal the survivability factors and the  characteristics of resilient clusters of grassroots initiatives.

# Key Findings: Grassroots Suitability Index (GSI)
Based on the combination of the Survival Analysis, SatScan statistics, and thematic analysis, this study found 16 significant factors emerged, which is then translated into an index comprising four dimensions: social resources, spatial characteristics, leadership capacity, and government position. Each dimensions has its indicators. Each indicator has its parameter and scoring rule as the rule of the game for the dashboard. 

- Social resources comprise seven indicators: the number of social activities, the existence of helping each other, the existence of social bonding, the existence of supportive local public figures, inhabitants’ mindset on engaging with social initiatives, the existence of active citizens/seekers, and heterogeneity of sociodemographics. 
- Spatial proximity has two indicators: proximity to other nearby neighbourhoods and the domination of the settlement area. 
- Leadership capacity consists of five indicators: engagement capacity, innovation capacity, commitment of the active citizens, the existence of institutional regeneration procedures, and leadership performance of the active citizens. 
- Government position has two indicators: the government’s perspective on grassroots initiatives and policies in supporting non-government solutions.


# ComSim Dashboard Development
The GSI indicators are then used to develop the dashboard. Each indicator has its parameter and scoring rule. The parameter of each indicator was developed based on a variety of sources, such as the Cox Model, kNN results, SatScan statistics, interview information, and related research that is relevant to justify the parameter setting. Each indicator then gets a score based on the state of the parameter as the standard rule (score range: -1 to 1). A positive score shows that the indicator data enters the desirable parameter. The negative score shows a reduction in the score because the indicator data is undesirable.

The determination of the scoring rules was based on the percentage of the exponential coefficient (the hazard ratio) of variables from the Cox Model. Nevertheless, some variables were modified to align with findings from the interview, such as the existence of public figures.

Qualitative indicators were converted into quantitative scores to capture associated factors beyond the quantitative indicators. These indicators come from the SatScan statistics and the interview. For these indicators, the score was set based on the following logic: If the indicator will directly affect survival, then it is very significant. It was then given a score of 1. If the indicator will indirectly affect survival, then the score is based on the quantile of how many variables are affected by the indicator until it affects survival. Score: 1 (direct effect), 0.75 (1 indirect effect), 0.50 (2 indirect effects), 0.25 (3 indirect effects), 0.125 (4 indirect effects), and so on. For example, in the indicator of domination of settlement area, more settlement areas will affect the higher possibility of permanent residents and heterogeneity of sociodemographic profile, which will affect the likelihood of active citizens' existence and will affect the initiative operation, and finally affect the survival of the initiative. From the example, there are four indirect effects for the indicator data to reach the state of survival. Hence, the indicator is given the score: +0.125 if the settlement area dominates the neighbourhood; -0.125 if vice versa condition. Consistency in defining the indirect effects is crucial in formulating scores for these variables (Halevi Hochwald et al., 2023). To ensure consistency, the end effect must be on the “initiative operation” (operation) that then will affect the “survival of the initiative” (survive).

The mathematical model (parameters and scoring rules) is then manifested into a simulation model that summarises the entire process to calculate the parameter’s score based on the inputted database (see Figure below). The key idea of the model is that the simulation already has a set of parameters and its score rules based on the GSI. The index can be directly used as the foundation to calculate data that is inputted. The calculation will then result in the neighbourhood suitability score and category that is based on the suitability criteria explained in the previous section. Users can also see the calculation score of each indicator and dimension as well if they want to look at the result in more detail. The result is then visualised on the map and graph containing the suitability score and category. It can be downloaded as a CSV file to be further manipulated, analysed, or visualised using geographic information system (GIS) and statistics-related software.

![image](https://github.com/user-attachments/assets/1eb48494-f41b-4d10-82f4-cf9cc6241e4e)

Flowchart of the Simulation Model

Technically, users will need to input data (as a CSV file) that is strictly structured based on format as can be found in the example data panel in the dashboard. The inputted data from the CSV file will then be stored in a database within the system. Once users run the simulation, the data will then be automatically calculated based on the set algorithm. Meanwhile, the parameters and scores following the GSI have been set within the system to feed the algorithm as a rule for the calculation process.

The simulation model is then translated into a computer code using an R package called “shiny”. It has three main components: **(1) User Interface (UI) controls, (2) Server Logic, and (3) App Launch**. Helper Function was also added to formulate necessary functions. Each component is represented in the codes.

The user interface contains any functions that set how the dashboard will look. The server logic section contains a function that has three elements: input, output, and session, which is the heart of the simulation. It sets instructions on how to process and execute any logic that we need the code to perform to achieve the objective of the simulation. The helper function is set to support the logical calculation within the server part. Once these components have already been set, the simulation can be run using the app launch function. The translation of the simulation model into the computer code was translated by building the model based on each of the package components. I acknowledge the use of Chat GPT-4 (OpenAI, https://chatgpt.com) to assist in developing the initial version of the codes and brainstorming specific approaches to improve the code. The researcher then subsequently improved the code in R software to fulfil the dashboard's performance expectations by manually rewriting, revising, and adding new elements to the code base.

The simulation model mainly comprises four aspects: dimension and indicator, database, parameter, and suitability determination, which become the main elements for the calculation logic. This section will show some of the main code as a snippet to illustrate the algorithm of the simulation.

**User Interface**

The first part is the user interface, which is divided into five elements: title, input panel, output panel, data filtering bar, and data example bar. A title is located on the top of the dashboard to inform users about the aim of the tool. There is an input panel on the left side of the dashboard containing a data input bar as a CSV file, a result download button, a suitability category data filter, and a CSV example file download button. Hence, users need to build the data on a CSV file before they upload it into the dashboard. The example data file is provided to give users the correct data format in the file that can be read and calculated by the model. Once users upload the data, it will be automatically calculated, and the results will be shown as a map, data table, and graphs. The results can be filtered based on the suitability category by using the “select suitability category to view” bar. In the end, users can download the results as a CSV file. The interface gives a minimum requirement for the model to be operated easily by the users.

As this simulation adopts a static-deterministic approach, the parameters and scoring rules cannot be changed by the users. However, the future versions will apply a parameter and scoring rule as input bars to increase its simulation capability and give users ease of use in calibrating the parameter and scoring rule later.

**Server Logic**

The server logic function is then developed as the “machine” that will perform the whole simulation. The first part is to build a logic for processing the inputted data from the CSV file to be piped into the indicator and dimension score calculation. It also contains a function to confirm whether the uploaded CSV file contains the required columns. The system will notify users if the uploaded file does not contain the exact named columns. Once the data is successfully inputted, it will be stored as a temporary database within the system. These data will then be calculated based on these functions sequentially: (1) indicator scoring, (2) dimension scoring, (3) indicator score normalisation, (4) dimension score normalisation, (5) suitability scoring, and (6) suitability categorisation. Overall, the data will be assigned to set the indicator score based on the parameter threshold that has been determined. It happens for each dimension, including the disruptor and bounce-back dimension. The dimension score is the summation of the indicator scores. For the Social Resource dimension, there is a separate process to calculate the sociodemographic heterogeneity indicator. It uses Shannon’s diversity index, which is built as a helper function, to calculate the indicator. Once the heterogeneity indicator has been calculated, it is then summed with other indicators that make the Social Dimension score. At this stage, the indicator and dimension score are still in actual numbers.

The next stage is to normalise the indicator and dimension score so that the scores are comparable with each other. The positive and negative value normalisation formula is set as a helper function. Hence, the indicator score normalisation uses a logical function to differentiate how the score normalisation will be handled. The dimension score is based on the average normalised value of the indicators.

The final stage would be to calculate the suitability score based on the normalised dimension score by averaging it. This score is then used to categorise the suitability score based on the criteria that have been explained in the previous sections.

Once the data has been calculated, the result will be shown on the map (as a circle marker), data table, suitability graph, and dimension score graph. This is where the longitude and latitude of the neighbourhood need to be inputted in the CSV file so that the results can be plotted on the map. The circle marker can be clicked and will show the normalised score of each dimension, the suitability score, and the suitability category. The data table will show an exhaustive list of the scoring results of both the actual value and normalised value, including the existing data and suitability category. This data can be downloaded by users and further explored using GIS or statistical software. The suitability graph shows the number of neighbourhoods in each suitability category. The data graph shows the distribution of dimension scores of all neighbourhoods. These data can be filtered based on the suitability category to allow users to examine the data on the dashboard quickly.

**App Launch**

Once the user interface and server logic functions have been set, the dashboard can be launched by assigning the app launch function. The final result is the overall suitability score that is divided into four categories, namely very suitable (0.75 – 1), suitable (0.5 – 0.74), less suitable (0.25 – 0.49), and not suitable (0 – 0.24). The suitability score and category are then stored within the system and visualised as a map, table, and graph, along with the dimension scores.

# Interpreting the Suitability Result
A matrix of possible grassroots initiative state is developed to help users interpret the suitability category results (see Figure below). However, it is not meant to be a sole method to interpret the results, as users will also need to examine the calculation result of each indicator and compare it with the actual condition on the field. The matrix is defined based on some indicators and dimensions that act as minimum requirements for a grassroots initiative to have a higher suitability score: the existence of active citizens, disruptors, and bounceback. Based on the score evaluation between different categories, these indicators and dimensions have a higher influence on the overall suitability score. The existence of active citizens would influence the score of the Leadership Capacity dimension. But if active citizens exist, it is not influential, as it only contributes to a score of +0.5. The disruptors and bounceback factors have relatively high score results because they only comprise a few indicators, resulting in a higher-end score. These requirements would then influence the overall suitability score. Nevertheless, the minimum requirement does not ignore the score of other dimensions. There may be some neighbourhoods that have the minimum requirements, but the initiative might not survive longer. This can be because other indicators are not fulfilled or the social resources are not working or activated yet. Hence, the total score does not reach the suitability score criteria. Otherwise, it can also be because of other reasons that are not captured by the model that need further investigation in the field.

![image](https://github.com/user-attachments/assets/250e1f22-e4f5-48b7-9c30-5216d37053ed)
